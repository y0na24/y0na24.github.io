---
import rec1 from 'public/rec-1.png'
import rec2 from 'public/rec-2.png'
import rec3 from 'public/rec-3.png'
import rec4 from 'public/rec-4.png'
import rec5 from 'public/rec-5.png'
import rec6 from 'public/rec-6.png'
import rec7 from 'public/rec-7.png'
import rec8 from 'public/rec-8.png'
---

<div class='mySwiper'>
	<div class='swiper-container'>
		<div class='swiper-wrapper ui-swiper'>
			<div class='swiper-slide'>
				<img src={rec1.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec2.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec3.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec4.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec5.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec6.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec7.src} alt='' />
			</div>
			<div class='swiper-slide'>
				<img src={rec8.src} alt='' />
			</div>
		</div>
		<div class='swiper-button-prev'></div>
		<div class='swiper-button-next'></div>
		<div class='swiper-pagination'></div>
	</div>

	<div id='modal' class='modal modal--closed'>
		<div class='modal-content'>
			<span class='close' onclick='
closeModal()'>&times;</span>
		</div>
	</div>
</div>

<link
	rel='stylesheet'
	href='https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css'
/>
<script
	is:inline
	src='https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js'></script>

<script is:inline>
	new Swiper('.swiper-container', {
		slidesPerView: 1,
		spaceBetween: 10,

		pagination: {
			el: '.swiper-pagination',
			clickable: true,
		},
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev',
		},
		breakpoints: {
			1024: {
				slidesPerView: 2,
			},
			1220: {
				slidesPerView: 3,
			},
			1440: {
				slidesPerView: 4,
			},
		},
	})

	const modal = document.getElementById('modal')
	const modalContent = modal.querySelector('.modal-content')

	function openModal(recommendationSrc) {
		const imageNode = document.createElement('img')
		imageNode.setAttribute('src', recommendationSrc)
		imageNode.onload = function () {
			modalContent.appendChild(imageNode)
			modal.classList.remove('modal--closed')
			modal.classList.add('modal--active')
		}
	}

	function closeModal() {
		modal.classList.remove('modal--active')
		modal.classList.add('modal--closed')
		modalContent.querySelector('img').remove()
	}

	const swiperSlides = document.querySelectorAll('.swiper-slide')
	swiperSlides.forEach(function (slide) {
		slide.addEventListener('click', function (e) {
			const recommendationSrc = e.target.src
			openModal(recommendationSrc)
		})
	})
</script>

<style>
	.mySwiper {
		position: relative;
		overflow: visible;
	}
	.ui-swiper {
		margin-bottom: 20px;
	}
	.swiper-container {
		padding: 20px;
		overflow: hidden;
	}

	.modal--active {
		display: block;
	}

	.swiper-slide img {
		cursor: pointer;
	}
	.swiper-button-next,
	.swiper-button-prev {
		display: none;
		position: absolute;
		top: 50%;
		width: 40px;
		height: 40px;
		margin-top: -20px;
		z-index: 10;
		cursor: pointer;
		background-color: var(--primary-color);
		color: #fff;
		border-radius: 50%;
		text-align: center;
		line-height: 40px;
	}

	.modal {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.5);
		z-index: 999;
	}

	.modal--open {
		display: block;
	}

	.modal--closed {
		display: none;
	}

	.modal-content {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 400px;

		background: #fff;
		padding: 20px;
		border-radius: 8px;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	}
	.close {
		position: absolute;
		top: 10px;
		right: 10px;
		cursor: pointer;
	}

	.swiper-pagination {
		position: relative;
		bottom: 10px;
		text-align: center;
	}
	.swiper-pagination-bullet {
		width: 8px;
		height: 8px;
		display: inline-block;
		margin: 0 5px;
		background: var(--primary-color);
		border-radius: 50%;
		cursor: pointer;
	}

	.swiper-button-next {
		right: -70px;
	}
	.swiper-button-prev {
		left: -70px;
	}

	@media screen and (min-width: 1440px) {
		.swiper-button-next,
		.swiper-button-prev {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.swiper-pagination {
			display: none;
		}

		.ui-swiper {
			margin-bottom: 0;
		}
	}
</style>
